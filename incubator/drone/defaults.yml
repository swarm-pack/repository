---
drone_server:
  service_name: drone_server
  image:
    repository: drone/drone
    tag: v1.0.0-rc6
    tag_pattern: glob:v1.0.*
    auto: true

  deploy:
    mode: replicated
    replicas: 1
    endpoint_mode: dnsrr
    placement_constraints: []

  db_volume_name: drone_database

  swarm-sync:
    managed: true

  traefik:
    hostname: drone.example.com
    stickiness: true

  ssl_volume_name: traefik_ssl
  swarm_sync_managed: true
  environment:
    - EXAMPLE=default
  ports:
    - "{target: 433, published: 443, protocol: tcp, mode: ingress}"
    - "{target: 80, published: 80, protocol: tcp, mode: ingress}"
  enable_web: false
  mount_docker_sock: true